(function(h,p){typeof exports=="object"&&typeof module<"u"?p(exports,require("@inlet/react-pixi"),require("pixi.js")):typeof define=="function"&&define.amd?define(["exports","@inlet/react-pixi","pixi.js"],p):(h=typeof globalThis<"u"?globalThis:h||self,p(h["pixi-easing-graph"]={},h.ReactPixi,h.PIXI))})(this,function(h,p,u){"use strict";var H=Object.defineProperty;var J=(h,p,u)=>p in h?H(h,p,{enumerable:!0,configurable:!0,writable:!0,value:u}):h[p]=u;var c=(h,p,u)=>(J(h,typeof p!="symbol"?p+"":p,u),u);function a(n){return n!=null&&typeof n=="object"&&n["@@functional/placeholder"]===!0}function y(n){return function o(i){return arguments.length===0||a(i)?o:n.apply(this,arguments)}}function f(n){return function o(i,r){switch(arguments.length){case 0:return o;case 1:return a(i)?o:y(function(e){return n(i,e)});default:return a(i)&&a(r)?o:a(i)?y(function(e){return n(e,r)}):a(r)?y(function(e){return n(i,e)}):n(i,r)}}}function _(n){return function o(i,r,e){switch(arguments.length){case 0:return o;case 1:return a(i)?o:f(function(t,s){return n(i,t,s)});case 2:return a(i)&&a(r)?o:a(i)?f(function(t,s){return n(t,r,s)}):a(r)?f(function(t,s){return n(i,t,s)}):y(function(t){return n(i,r,t)});default:return a(i)&&a(r)&&a(e)?o:a(i)&&a(r)?f(function(t,s){return n(t,s,e)}):a(i)&&a(e)?f(function(t,s){return n(t,r,s)}):a(r)&&a(e)?f(function(t,s){return n(i,t,s)}):a(i)?y(function(t){return n(t,r,e)}):a(r)?y(function(t){return n(i,t,e)}):a(e)?y(function(t){return n(i,r,t)}):n(i,r,e)}}}var $=f(function(o,i){return o.apply(this,i)});const F=$;var A=_(function(o,i,r){if(o>i)throw new Error("min must not be greater than max in clamp(min, max, value)");return r<o?o:r>i?i:r});const D=A;function R(n){return n}var q=y(R);const X=q;var I=f(function(o,i){var r=Number(i),e=0,t;if(r<0||isNaN(r))throw new RangeError("n must be a non-negative number");for(t=new Array(r);e<r;)t[e]=o(e),e+=1;return t});const O=I;var U=f(function(o,i){for(var r=[],e=0,t=Math.min(o.length,i.length);e<t;)r[e]=[o[e],i[e]],e+=1;return r});const j=U,z=u.Ticker.shared,Y={width:250,height:250,style:"dot",clamp:!1,steps:NaN,dotSize:2,background:16777215,foreground:0,fillAlpha:.5,showMarker:!0,markerColor:16711680,markerSize:10,markerTrail:!1,showExample:!1,exampleColor:3355443,exampleSize:50,examplePosition:"bottom",exampleTrail:!1,gridCount:10,gridColor:13421772,gridSubdivisions:!0,duration:2e3,autoPlay:!1,loop:!1},M=D(0,1);class G extends u.Sprite{constructor(i,r={}){super();c(this,"f");c(this,"graphics");c(this,"trail");c(this,"options");c(this,"isPlaying",!1);c(this,"marker");c(this,"exampleX");c(this,"exampleY");c(this,"t",0);this.f=i,this.options={...Y,...r},this.graphics=new u.Graphics,this.addChild(this.graphics),this.trail=new u.Graphics,this.addChild(this.trail);const{markerSize:e,markerColor:t,exampleColor:s,exampleSize:l}=this.options;this.marker=new E(t,e),this.marker.visible=!1,this.addChild(this.marker),this.exampleX=new E(s,l),this.exampleX.visible=!1,this.exampleX.x=0,this.exampleX.y=this.options.height+l*1.5,this.addChild(this.exampleX),this.exampleY=new E(s,l),this.exampleY.visible=!1,this.exampleY.x=this.options.width+l*1.5,this.exampleY.y=this.options.height,this.addChild(this.exampleY)}play(){this.stop();const{showMarker:i,showExample:r,examplePosition:e}=this.options;i&&(this.marker.visible=!0),r&&(this.exampleY.visible=this.exampleX.visible=!0),e==="bottom"&&(this.exampleY.visible=!1),e==="right"&&(this.exampleX.visible=!1),this.trail.clear(),this.t=0,this.isPlaying=!0,z.add(this.animationStep,this)}stop(){z.remove(this.animationStep,this),this.isPlaying=!1}animationStep(){this.t+=z.deltaMS;const{t:i,options:r,exampleX:e,exampleY:t,marker:s,f:l,trail:m}=this,{clamp:d,width:w,height:g,exampleTrail:x,markerTrail:C,dotSize:v,foreground:S,duration:b,loop:N}=r,L=d?M:X,T=i/b,P=L(l(T));s.x=T*w,s.y=g-P*g,e.visible&&(e.x=P*w),t.visible&&(t.y=s.y);const k=m;k.beginFill(S),x&&(e.visible&&k.drawCircle(e.x,e.y,v),t.visible&&k.drawCircle(t.x,t.y,v)),C&&s.visible&&k.drawCircle(s.x,s.y,v),k.endFill(),i>b&&(this.stop(),N&&this.play())}draw(){const i=this.graphics,{width:r,height:e,style:t,background:s,steps:l,gridCount:m,clamp:d,autoPlay:w}=this.options,g=isNaN(l)?r:l,x=d?M:X,C=O(T=>T/(g-1),g),v=C.map(this.f).map(x),S=j(C,v),b=([T,P])=>[T*r,e-P*e],N=S.map(b);i.clear(),i.beginFill(s),i.drawRect(0,0,r,e),i.endFill(),m>0&&this.drawGrid(),{line:this.drawLines,fill:this.drawFill,dot:this.drawDots}[t].call(this,N),w&&this.play()}drawDots(i){const{foreground:r,dotSize:e}=this.options,t=this.graphics,s=(l,m)=>t.drawCircle(l,m,e);t.beginFill(r),i.map(F(s)),t.endFill()}drawLines(i){const{foreground:r,height:e}=this.options,t=this.graphics,s=F(t.lineTo.bind(t));t.moveTo(0,e),t.lineStyle(1,r),i.map(s),t.lineStyle()}drawFill(i){const{foreground:r,fillAlpha:e,width:t,height:s}=this.options,l=this.graphics,m=F(l.lineTo.bind(l));l.moveTo(0,s),l.beginFill(r,e),i.map(m),l.lineTo(t,0),l.lineTo(t,s),l.lineTo(0,s),l.endFill(),l.closePath()}drawGrid(){const i=this.graphics,{width:r,height:e,gridCount:t,gridColor:s,gridSubdivisions:l}=this.options;i.lineStyle(1,s),O(d=>{i.lineStyle(1,s),(l&&d===0||d===t||d===t/2&&t%2===0)&&(i.lineStyle(2,s),i.lineStyle(2,s)),i.moveTo(0,d/t*e),i.lineTo(r,d/t*e),i.closePath(),i.moveTo(d/t*r,0),i.lineTo(d/t*r,e),i.closePath()},t+1),i.lineStyle()}}c(G,"defaultOptions",Y);class E extends u.Sprite{constructor(i,r,e){super(e);c(this,"color");c(this,"size");c(this,"graphics");this.color=i,this.size=r,this.graphics=new u.Graphics,this.addChild(this.graphics),this.anchor.set(.5),this.draw()}draw(){const{graphics:i,color:r,size:e}=this;i.clear(),i.beginFill(r),i.drawCircle(0,0,e),i.endFill()}}const B=p.PixiComponent("EasingGraph",{create:({f:n,...o})=>new G(n,o),didMount:(n,o)=>{n.draw()},willUnmount:(n,o)=>{},applyProps:(n,o,i)=>{var v,S;const{f:r,play:e,x:t,y:s,...l}=o,{f:m,play:d,x:w,y:g,...x}=i;e!==d&&n.play();const C=l!==x||l.style!==x.style||l.showExample!==x.showExample||r!==m;n.x=(v=w!=null?w:t)!=null?v:0,n.y=(S=g!=null?g:s)!=null?S:0,n.f=m,n.options={...n.options,...x},C&&n.draw()},config:{destroy:!0,destroyChildren:!0}});h.EasingGraph=G,h.EasingGraphComponent=B,Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
